const CACHE_NAME="cerita-di-sekitarmu-v13",STATIC_ASSETS=["/po1/","/po1/index.html","/po1/app.css","/po1/app.bundle.js","/po1/vendors.bundle.js","/po1/app.webmanifest","/po1/favicon.png","/po1/icons/icon-72x72.png","/po1/icons/icon-96x96.png","/po1/icons/icon-128x128.png","/po1/icons/icon-144x144.png","/po1/icons/icon-152x152.png","/po1/icons/icon-192x192.png","/po1/icons/icon-384x384.png","/po1/icons/icon-512x512.png","/po1/images/logo.png","/po1/images/mark.png"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(STATIC_ASSETS).catch((e=>{})))).then((()=>self.skipWaiting())).catch((e=>{})))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return caches.delete(e)}))))).then((()=>self.clients.claim())).catch((e=>{})))})),self.addEventListener("fetch",(e=>{if("GET"!==e.request.method)return;const n=new URL(e.request.url);"chrome-extension:"!==n.protocol&&n.origin.startsWith(self.location.origin)&&(n.pathname.includes("/api/")||n.href.includes("story-api.dicoding.dev")||("navigate"!==e.request.mode?e.respondWith(caches.match(e.request).then((n=>n||fetch(e.request).then((n=>{if(!n||200!==n.status||"basic"!==n.type)return n;const t=n.clone();return caches.open(CACHE_NAME).then((n=>{n.put(e.request,t)})).catch((e=>{})),n})).catch((n=>"image"===e.request.destination?caches.match("/po1/images/mark.png").then((e=>e||new Response("Image not available",{status:404,headers:{"Content-Type":"text/plain"}}))):new Response("Content not available offline",{status:408,headers:{"Content-Type":"text/plain"}})))))):e.respondWith(caches.match("/po1/index.html").then((n=>n||fetch(e.request))).catch((e=>new Response("Offline - Navigation failed",{status:408,headers:{"Content-Type":"text/plain"}}))))))})),self.addEventListener("push",(e=>{try{const n={body:"Ada cerita baru di sekitarmu!",icon:"/po1/icons/icon-192x192.png",badge:"/po1/icons/icon-72x72.png",tag:"new-story-notification",requireInteraction:!0};e.waitUntil(self.registration.showNotification("Cerita di Sekitarmu",n).then((()=>{})).catch((e=>{})))}catch(e){}})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((e=>{for(const n of e)if(n.url.includes("/po1/")&&"focus"in n)return n.focus();if(clients.openWindow)return clients.openWindow("/po1/")})).catch((e=>{})))})),self.addEventListener("sync",(e=>{"sync-offline-stories"===e.tag&&e.waitUntil(Promise.resolve().then((()=>{})))})),self.addEventListener("message",(e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()}));