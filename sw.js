const CACHE_NAME="cerita-di-sekitarmu-v1",STATIC_ASSETS=["/po1/","/po1/index.html","/po1/app.css","/po1/app.bundle.js","/po1/vendors.bundle.js","/po1/app.webmanifest","/po1/favicon.png","/po1/icons/icon-72x72.png","/po1/icons/icon-96x96.png","/po1/icons/icon-128x128.png","/po1/icons/icon-144x144.png","/po1/icons/icon-152x152.png","/po1/icons/icon-192x192.png","/po1/icons/icon-384x384.png","/po1/icons/icon-512x512.png","/po1/images/logo.png","/po1/images/mark.png"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(STATIC_ASSETS))).then((()=>self.skipWaiting())).catch((e=>{})))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return caches.delete(e)}))))).then((()=>self.clients.claim())).catch((e=>{})))})),self.addEventListener("fetch",(e=>{if("GET"!==e.request.method)return;const n=new URL(e.request.url);n.origin.startsWith(self.location.origin)&&(n.pathname.includes("/api/")||n.href.includes("story-api.dicoding.dev")||("navigate"!==e.request.mode?e.respondWith(caches.match(e.request).then((n=>n||fetch(e.request).then((n=>{if(n&&200===n.status){const t=n.clone();caches.open(CACHE_NAME).then((n=>{n.put(e.request,t)}))}return n})).catch((()=>"image"===e.request.destination?caches.match("/po1/images/mark.png"):new Response("Offline content not available")))))):e.respondWith(caches.match("/po1/index.html").then((n=>n||fetch(e.request))).catch((()=>caches.match("/po1/index.html"))))))})),self.addEventListener("push",(e=>{e.waitUntil(self.registration.showNotification("Cerita di Sekitarmu",{body:"Ada cerita baru di sekitarmu! ðŸ—ºï¸",icon:"/po1/icons/icon-192x192.png",badge:"/po1/icons/icon-72x72.png",tag:"story-notification"}))})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.matchAll({type:"window"}).then((e=>{for(const n of e)if(n.url.includes("/po1/")&&"focus"in n)return n.focus();if(clients.openWindow)return clients.openWindow("/po1/")})))})),self.addEventListener("message",(e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()}));