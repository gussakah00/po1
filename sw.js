const CACHE_NAME="cerita-di-sekitarmu-v7",STATIC_ASSETS=["/","/index.html","/styles/styles.css","/app.bundle.js","/vendors.bundle.js","/app.webmanifest","/favicon.png"];async function cacheFirstStrategy(e){try{const t=await caches.match(e);if(t)return t;const n=await fetch(e);if(n.ok){(await caches.open(CACHE_NAME)).put(e,n.clone())}return n}catch(t){if("document"===e.destination){const e=await caches.match("/index.html");if(e)return e}return new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}}async function networkFirstStrategy(e){try{return await fetch(e)}catch(e){return new Response(JSON.stringify({error:!0,message:"You are offline"}),{status:408,headers:{"Content-Type":"application/json"}})}}self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(STATIC_ASSETS).catch((e=>{})))).then((()=>self.skipWaiting())))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return caches.delete(e)}))))).then((()=>self.clients.claim())))})),self.addEventListener("fetch",(e=>{const t=new URL(e.request.url);"GET"===e.request.method&&t.origin.startsWith(self.location.origin)&&("localhost"!==t.hostname&&"3000"!==t.port?t.pathname.includes("/api/")||t.href.includes("story-api.dicoding.dev")?e.respondWith(networkFirstStrategy(e.request)):e.respondWith(cacheFirstStrategy(e.request)):e.respondWith(fetch(e.request)))})),self.addEventListener("push",(e=>{e.waitUntil(self.registration.showNotification("Cerita di Sekitarmu",{body:"Ada cerita baru di sekitarmu!",icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",data:{url:"/"}}))})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.openWindow("/"))}));