const CACHE_NAME="cerita-app-v4",STATIC_ASSETS=["/po1/","/po1/index.html","/po1/main.bundle.js","/po1/styles.css","/po1/icons/icon-72x72.png","/po1/icons/icon-96x96.png","/po1/icons/icon-128x128.png","/po1/icons/icon-144x144.png","/po1/icons/icon-152x152.png","/po1/icons/icon-192x192.png","/po1/icons/icon-384x384.png","/po1/icons/icon-512x512.png","/po1/app.webmanifest"];self.addEventListener("install",(n=>{n.waitUntil(caches.open(CACHE_NAME).then((n=>n.addAll(STATIC_ASSETS))).then((()=>self.skipWaiting())))})),self.addEventListener("activate",(n=>{n.waitUntil(Promise.all([caches.keys().then((n=>Promise.all(n.map((n=>{if(n!==CACHE_NAME)return caches.delete(n)}))))),self.clients.claim()]))})),self.addEventListener("fetch",(n=>{if("GET"!==n.request.method)return;new URL(n.request.url).href.includes("story-api.dicoding.dev")||n.respondWith(caches.match(n.request).then((e=>e||fetch(n.request).then((e=>{if(200===e.status){const i=e.clone();caches.open(CACHE_NAME).then((e=>{e.put(n.request,i)}))}return e})).catch((()=>{if("document"===n.request.destination)return caches.match("/po1/index.html")})))))})),self.addEventListener("push",(n=>{n.waitUntil(self.registration.showNotification("Cerita di Sekitarmu",{body:"Ada cerita baru di sekitarmu! ðŸ“–",icon:"/po1/icons/icon-192x192.png",badge:"/po1/icons/icon-72x72.png",tag:"story-notification"}))})),self.addEventListener("notificationclick",(n=>{n.notification.close(),n.waitUntil(clients.matchAll({type:"window"}).then((n=>{for(const e of n)if(e.url.includes("/po1/")&&"focus"in e)return e.focus();if(clients.openWindow)return clients.openWindow("/po1/#/beranda")})))}));