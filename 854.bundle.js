/*! For license information please see 854.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkcerita_di_sekitarmu=self.webpackChunkcerita_di_sekitarmu||[]).push([[854],{778:(t,e,n)=>{n.d(e,{DY:()=>S,Lx:()=>k,ZO:()=>b,y_:()=>g});var r=n(221);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){var t=f(),e=t.m(a),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function p(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,a){return e.resultName=o,n(r.d,i(t),a)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(a=function(){return{wrap:function(e,n,r,o){return t.w(p(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:l,async:function(t,e,n,o,a){return(r(e)?s:c)(p(t),e,n,o,a)},keys:u,values:i}})()}function i(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(o(t)+" is not iterable")}function u(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function c(t,e,n,r,o){var a=s(t,e,n,r,o);return a.next().then((function(t){return t.done?t.value:a.next()}))}function s(t,e,n,r,o){return new l(f().w(t,e,n,r),o||Promise)}function l(t,e){function n(r,o,a,i){try{var u=t[r](o),c=u.value;return c instanceof d?e.resolve(c.v).then((function(t){n("next",t,a,i)}),(function(t){n("throw",t,a,i)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,i)}))}catch(t){i(t)}}var r;this.next||(p(l.prototype),p(l.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),p(this,"_invoke",(function(t,o,a){function i(){return new e((function(e,r){n(t,a,e,r)}))}return r=r?r.then(i,i):i()}),!0)}function f(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return p(s,"_invoke",function(n,r,o){var a,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,u=0,c=t,p.n=n,i}};function d(n,r){for(u=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,m=a[2];n>3?(o=m===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(u=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,u=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),u=l,c=m;(e=u<2?t:c)||!f;){a||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,u=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(p(e={},r,(function(){return this})),e),d=s.prototype=u.prototype=Object.create(l);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,p(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return c.prototype=s,p(d,"constructor",s),p(s,"constructor",c),c.displayName="GeneratorFunction",p(s,o,"GeneratorFunction"),p(d),p(d,o,"Generator"),p(d,r,(function(){return this})),p(d,"toString",(function(){return"[object Generator]"})),(f=function(){return{w:a,m}})()}function p(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}p=function(t,e,n,r){function a(e,n){p(t,e,(function(t){return this._invoke(e,n,t)}))}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},p(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function m(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){m(a,r,o,i,u,"next",t)}function u(t){m(a,r,o,i,u,"throw",t)}i(void 0)}))}}var v="https://story-api.dicoding.dev/v1";function b(){return h.apply(this,arguments)}function h(){return(h=y(a().mark((function t(){var e,n,o,i,u,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.y.getToken()){t.next=4;break}return t.abrupt("return",[]);case 4:return t.prev=4,n=new AbortController,o=setTimeout((function(){return n.abort()}),1e4),t.next=10,fetch("".concat(v,"/stories"),{headers:{Authorization:"Bearer ".concat(e)},signal:n.signal});case 10:if(i=t.sent,clearTimeout(o),i.ok){t.next=14;break}throw new Error("HTTP error! status: ".concat(i.status));case 14:return t.next=16,i.json();case 16:if(!(u=t.sent).error&&u.listStory){t.next=21;break}return t.abrupt("return",[]);case 21:return c=u.listStory.map((function(t){var e=t.photoUrl;return t.photoUrl&&t.photoUrl.startsWith("http")||(e="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkdhbWJhciB0aWRhayB0ZXJzZWRpYTwvdGV4dD48L3N2Zz4="),{id:t.id,name:t.name,description:t.description,photoUrl:e,lat:t.lat,lon:t.lon,createdAt:t.createdAt}})),t.abrupt("return",c);case 25:return t.prev=25,t.t0=t.catch(4),"AbortError"===t.t0.name||"TypeError"===t.t0.name&&t.t0.message.includes("Failed to fetch"),t.abrupt("return",[]);case 30:case"end":return t.stop()}}),t,null,[[4,25]])})))).apply(this,arguments)}function g(t){return w.apply(this,arguments)}function w(){return(w=y(a().mark((function t(e){var n,o,i,u,c,s,l,f,p,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.description,o=e.photo,i=e.lat,u=e.lon,c=r.y.getToken()){t.next=4;break}return t.abrupt("return",{error:!0,message:"Anda harus login untuk menambah cerita."});case 4:return(s=new FormData).append("description",n),s.append("photo",o),i&&s.append("lat",i),u&&s.append("lon",u),t.prev=9,l=new AbortController,f=setTimeout((function(){return l.abort()}),3e4),t.next=15,fetch("".concat(v,"/stories"),{method:"POST",body:s,headers:{Authorization:"Bearer ".concat(c)},signal:l.signal});case 15:return p=t.sent,clearTimeout(f),t.next=20,p.json();case 20:if(d=t.sent,p.ok&&!d.error){t.next=24;break}return t.abrupt("return",{error:!0,message:d.message||"Error ".concat(p.status,": ").concat(p.statusText)});case 24:return t.abrupt("return",d);case 28:if(t.prev=28,t.t0=t.catch(9),"AbortError"!==t.t0.name){t.next=33;break}return t.abrupt("return",{error:!0,message:"Request timeout - Server terlalu lama merespon."});case 33:if("TypeError"!==t.t0.name||!t.t0.message.includes("Failed to fetch")){t.next=35;break}return t.abrupt("return",{error:!0,message:"Gagal terhubung ke server. Periksa koneksi internet Anda."});case 35:return t.abrupt("return",{error:!0,message:"Gagal mengirim data: ".concat(t.t0.message)});case 36:case"end":return t.stop()}}),t,null,[[9,28]])})))).apply(this,arguments)}function k(t){return x.apply(this,arguments)}function x(){return(x=y(a().mark((function t(e){var n,r,o,i,u,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.email,r=e.password,t.prev=1,o=new AbortController,i=setTimeout((function(){return o.abort()}),1e4),t.next=6,fetch("".concat(v,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r}),signal:o.signal});case 6:return u=t.sent,clearTimeout(i),t.next=10,u.json();case 10:if(c=t.sent,u.ok){t.next=13;break}return t.abrupt("return",{error:!0,message:c.message||"Login gagal"});case 13:return t.abrupt("return",{error:!1,data:c});case 16:if(t.prev=16,t.t0=t.catch(1),"AbortError"!==t.t0.name){t.next=20;break}return t.abrupt("return",{error:!0,message:"Request timeout - Server terlalu lama merespon."});case 20:return t.abrupt("return",{error:!0,message:"Terjadi kesalahan jaringan"});case 21:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}function S(t){return T.apply(this,arguments)}function T(){return(T=y(a().mark((function t(e){var n,r,o,i,u,c,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.name,r=e.email,o=e.password,t.prev=1,i=new AbortController,u=setTimeout((function(){return i.abort()}),1e4),t.next=6,fetch("".concat(v,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:r,password:o}),signal:i.signal});case 6:return c=t.sent,clearTimeout(u),t.next=10,c.json();case 10:if(s=t.sent,c.ok){t.next=13;break}return t.abrupt("return",{error:!0,message:s.message||"Pendaftaran gagal"});case 13:return t.abrupt("return",{error:!1,data:s});case 16:if(t.prev=16,t.t0=t.catch(1),"AbortError"!==t.t0.name){t.next=20;break}return t.abrupt("return",{error:!0,message:"Request timeout - Server terlalu lama merespon."});case 20:return t.abrupt("return",{error:!0,message:"Terjadi kesalahan jaringan"});case 21:case"end":return t.stop()}}),t,null,[[1,16]])})))).apply(this,arguments)}},854:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var r=n(778),o=n(221);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(){var t=p(),e=t.m(i),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var o={throw:1,return:2,break:3,continue:3};function a(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,o[t],e)},delegateYield:function(t,o,a){return e.resultName=o,n(r.d,u(t),a)},finish:function(t){return n(r.f,t)}},n=function(t,n,o){r.p=e.prev,r.n=e.next;try{return t(n,o)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(i=function(){return{wrap:function(e,n,r,o){return t.w(a(e),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new m(t,e)},AsyncIterator:f,async:function(t,e,n,o,i){return(r(e)?l:s)(a(t),e,n,o,i)},keys:c,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(a(t)+" is not iterable")}function c(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function s(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then((function(t){return t.done?t.value:a.next()}))}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(t,e){function n(r,o,a,i){try{var u=t[r](o),c=u.value;return c instanceof m?e.resolve(c.v).then((function(t){n("next",t,a,i)}),(function(t){n("throw",t,a,i)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,i)}))}catch(t){i(t)}}var r;this.next||(d(f.prototype),d(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),d(this,"_invoke",(function(t,o,a){function i(){return new e((function(e,r){n(t,a,e,r)}))}return r=r?r.then(i,i):i()}),!0)}function p(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return d(s,"_invoke",function(n,r,o){var a,u,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,u=0,c=t,p.n=n,i}};function d(n,r){for(u=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,m=a[2];n>3?(o=m===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(u=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,u=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),u=l,c=m;(e=u<2?t:c)||!f;){a||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,u=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(d(e={},r,(function(){return this})),e),f=s.prototype=u.prototype=Object.create(l);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,d(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=s,d(f,"constructor",s),d(s,"constructor",c),c.displayName="GeneratorFunction",d(s,o,"GeneratorFunction"),d(f),d(f,o,"Generator"),d(f,r,(function(){return this})),d(f,"toString",(function(){return"[object Generator]"})),(p=function(){return{w:a,m}})()}function d(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}d=function(t,e,n,r){function a(e,n){d(t,e,(function(t){return this._invoke(e,n,t)}))}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},d(t,e,n,r)}function m(t,e){this.v=t,this.k=e}function y(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){y(a,r,o,i,u,"next",t)}function u(t){y(a,r,o,i,u,"throw",t)}i(void 0)}))}}const b={render:function(){return v(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="auth-page" aria-labelledby="login-title">\n        <h1 id="login-title" tabindex="0">Masuk ke Akun Anda</h1>\n        <form id="loginForm" class="auth-form" aria-labelledby="login-title" autocomplete="off">\n          <div class="form-group">\n            <label for="login-email">Email:</label>\n            <input \n              type="email" \n              id="login-email" \n              name="email" \n              required \n              aria-required="true"\n              placeholder="Masukkan email Anda"\n              autocomplete="new-email"\n              aria-describedby="email-help"\n            >\n            <p id="email-help" class="form-help">Masukkan alamat email yang terdaftar</p>\n            <p id="email-error" class="error-message" aria-live="polite"></p>\n          </div>\n          \n          <div class="form-group">\n            <label for="login-password">Kata Sandi:</label>\n            <input \n              type="password" \n              id="login-password" \n              name="password" \n              required \n              aria-required="true"\n              placeholder="Masukkan kata sandi Anda"\n              autocomplete="new-password"\n              aria-describedby="password-help"\n            >\n            <p id="password-help" class="form-help">Masukkan kata sandi akun Anda</p>\n            <p id="password-error" class="error-message" aria-live="polite"></p>\n          </div>\n          \n          <button type="submit" class="submit-button">Masuk</button>\n          <p class="auth-link">\n            Belum punya akun? <a href="#/register" class="link">Daftar di sini</a>\n          </p>\n        </form>\n        <div id="auth-message" class="info-message" aria-live="polite" style="display:none;"></div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)})))()},afterRender:function(){var t=this;return v(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._setupFormValidation(),t._setupFormSubmission();case 2:case"end":return e.stop()}}),e)})))()},_setupFormValidation:function(){document.getElementById("loginForm");var t=document.getElementById("login-email"),e=document.getElementById("login-password");t.addEventListener("blur",(function(){var e=t.value.trim(),n=document.getElementById("email-error");e?!function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}(e)?(n.textContent="Format email tidak valid",t.setAttribute("aria-invalid","true")):(n.textContent="",t.setAttribute("aria-invalid","false")):(n.textContent="Email harus diisi",t.setAttribute("aria-invalid","true"))})),e.addEventListener("blur",(function(){var t=e.value,n=document.getElementById("password-error");t?t.length<6?(n.textContent="Kata sandi minimal 6 karakter",e.setAttribute("aria-invalid","true")):(n.textContent="",e.setAttribute("aria-invalid","false")):(n.textContent="Kata sandi harus diisi",e.setAttribute("aria-invalid","true"))})),setTimeout((function(){t.value="",e.value=""}),100)},_setupFormSubmission:function(){var t=document.getElementById("loginForm"),e=document.getElementById("auth-message");t.addEventListener("submit",function(){var n=v(i().mark((function n(a){var u,c,s,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),u=document.getElementById("login-email").value.trim(),c=document.getElementById("login-password").value,u&&c){n.next=8;break}return e.textContent="Harap isi semua field yang diperlukan",e.style.display="block",e.style.backgroundColor="#fee",n.abrupt("return");case 8:return(s=t.querySelector(".submit-button")).disabled=!0,s.textContent="Memproses...",e.textContent="Sedang masuk...",e.style.display="block",e.style.backgroundColor="#e3f2fd",n.prev=14,n.next=17,(0,r.Lx)({email:u,password:c});case 17:if(!(l=n.sent).error){n.next=20;break}throw new Error(l.message);case 20:o.y.login(l.data.loginResult.token,{name:l.data.loginResult.name,email:u}),e.textContent="Login berhasil! Mengarahkan ke beranda...",e.style.backgroundColor="#e8f5e8",window.dispatchEvent(new Event("authchange")),setTimeout((function(){window.location.hash="#/beranda"}),2e3),n.next=33;break;case 27:n.prev=27,n.t0=n.catch(14),e.textContent="Login gagal: ".concat(n.t0.message),e.style.backgroundColor="#fee",s.disabled=!1,s.textContent="Masuk";case 33:case"end":return n.stop()}}),n,null,[[14,27]])})));return function(t){return n.apply(this,arguments)}}())}}}}]);