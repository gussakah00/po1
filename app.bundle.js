/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e,n={612:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}n.d(e,{y:()=>a});var a=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tokenKey="authToken",this.userKey="userData"},(e=[{key:"login",value:function(t,e){localStorage.setItem(this.tokenKey,t),localStorage.setItem(this.userKey,JSON.stringify(e))}},{key:"logout",value:function(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.userKey)}},{key:"isLoggedIn",value:function(){return!!this.getToken()}},{key:"getToken",value:function(){return localStorage.getItem(this.tokenKey)}},{key:"getUser",value:function(){var t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}},{key:"getUserName",value:function(){var t=this.getUser();return t?t.name:"Pengguna"}}])&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}())}},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={exports:{}};return n[t].call(o.exports,o,o.exports,i),o.exports}function o(t){var e=t.split("/");return{resource:e[1]||null,id:e[2]||null}}function a(t){var e="";return t.resource&&(e=e.concat("/".concat(t.resource))),t.id&&(e=e.concat("/:id")),e||"/"}function u(){return location.hash.replace("#","")||"/beranda"}i.m=n,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,n)=>(i.f[n](t,e),e)),[])),i.u=t=>t+".bundle.js",i.miniCssF=t=>{},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="cerita-di-sekitarmu:",i.l=(n,r,o,a)=>{if(t[n])t[n].push(r);else{var u,c;if(void 0!==o)for(var s=document.getElementsByTagName("script"),f=0;f<s.length;f++){var l=s[f];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==e+o){u=l;break}}u||(c=!0,(u=document.createElement("script")).charset="utf-8",i.nc&&u.setAttribute("nonce",i.nc),u.setAttribute("data-webpack",e+o),u.src=n),t[n]=[r];var p=(e,r)=>{u.onerror=u.onload=null,clearTimeout(d);var i=t[n];if(delete t[n],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((t=>t(r))),e)return e(r)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=p.bind(null,u.onerror),u.onload=p.bind(null,u.onload),c&&document.head.appendChild(u)}},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="/po1/",(()=>{var t={524:0};i.f.j=(e,n)=>{var r=i.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=o);var a=i.p+i.u(e),u=new Error;i.l(a,(n=>{if(i.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,r[1](u)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,o,[a,u,c]=n,s=0;if(a.some((e=>0!==t[e]))){for(r in u)i.o(u,r)&&(i.m[r]=u[r]);if(c)c(i)}for(e&&e(n);s<a.length;s++)o=a[s],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunkcerita_di_sekitarmu=self.webpackChunkcerita_di_sekitarmu||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var c=i(612);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(){var t=y(),e=t.m(f),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var i={throw:1,return:2,break:3,continue:3};function o(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,i[t],e)},delegateYield:function(t,i,o){return e.resultName=i,n(r.d,l(t),o)},finish:function(t){return n(r.f,t)}},n=function(t,n,i){r.p=e.prev,r.n=e.next;try{return t(n,i)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(f=function(){return{wrap:function(e,n,r,i){return t.w(o(e),n,r,i&&i.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new m(t,e)},AsyncIterator:v,async:function(t,e,n,i,a){return(r(e)?h:d)(o(t),e,n,i,a)},keys:p,values:l}})()}function l(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(s(t)+" is not iterable")}function p(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function d(t,e,n,r,i){var o=h(t,e,n,r,i);return o.next().then((function(t){return t.done?t.value:o.next()}))}function h(t,e,n,r,i){return new v(y().w(t,e,n,r),i||Promise)}function v(t,e){function n(r,i,o,a){try{var u=t[r](i),c=u.value;return c instanceof m?e.resolve(c.v).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,a)}))}catch(t){a(t)}}var r;this.next||(b(v.prototype),b(v.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),b(this,"_invoke",(function(t,i,o){function a(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return b(s,"_invoke",function(n,r,i){var o,u,c,s=0,f=i||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,u=0,c=t,p.n=n,a}};function d(n,r){for(u=n,c=r,e=0;!l&&s&&!i&&e<f.length;e++){var i,o=f[e],d=p.p,h=o[2];n>3?(i=h===r)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=d&&((i=n<2&&d<o[1])?(u=0,p.v=r,p.n=o[1]):d<h&&(i=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,p.n=h,u=0))}if(i||n>1)return a;throw l=!0,r}return function(i,f,h){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,h),u=f,c=h;(e=u<2?t:c)||!l;){o||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,o){if(u||(i="next"),e=o[i]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=o.return)&&e.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){o=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,i,o),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(b(e={},r,(function(){return this})),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,b(t,i,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,b(l,"constructor",s),b(s,"constructor",c),c.displayName="GeneratorFunction",b(s,i,"GeneratorFunction"),b(l),b(l,i,"Generator"),b(l,r,(function(){return this})),b(l,"toString",(function(){return"[object Generator]"})),(y=function(){return{w:o,m:p}})()}function b(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}b=function(t,e,n,r){function o(e,n){b(t,e,(function(t){return this._invoke(e,n,t)}))}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},b(t,e,n,r)}function m(t,e){this.v=t,this.k=e}function g(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){g(o,r,i,a,u,"next",t)}function u(t){g(o,r,i,a,u,"throw",t)}a(void 0)}))}}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}var x=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isSubscribed=!1,this.registration=null,this.subscription=null,this.VAPID_PUBLIC_KEY="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk",this._isInitialized=!1,this._initPromise=null},e=[{key:"init",value:(c=w(f().mark((function t(){var e=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._initPromise){t.next=3;break}return t.abrupt("return",this._initPromise);case 3:return this._initPromise=new Promise(function(){var t=w(f().mark((function t(n,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._isSupported()){t.next=5;break}return e._isInitialized=!0,n(!1),t.abrupt("return");case 5:return t.prev=5,t.next=8,navigator.serviceWorker.ready;case 8:return e.registration=t.sent,t.next=12,e.registration.pushManager.getSubscription();case 12:e.subscription=t.sent,e.isSubscribed=!(null===e.subscription),e._isInitialized=!0,n(!0),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(5),e._isInitialized=!0,n(!1);case 24:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e,n){return t.apply(this,arguments)}}()),t.abrupt("return",this._initPromise);case 5:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_isSupported",value:function(){return"serviceWorker"in navigator&&"PushManager"in window}},{key:"subscribe",value:(u=w(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isInitialized){t.next=3;break}return t.next=3,this.init();case 3:if(this.registration){t.next=5;break}throw new Error("Service Worker not ready");case 5:return t.prev=5,t.next=8,Notification.requestPermission();case 8:if("granted"===t.sent){t.next=11;break}throw new Error("Izin notifikasi ditolak");case 11:if(!this.subscription){t.next=14;break}return t.next=14,this.subscription.unsubscribe();case 14:return t.next=16,this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this._urlBase64ToUint8Array(this.VAPID_PUBLIC_KEY)});case 16:return this.subscription=t.sent,this.isSubscribed=!0,t.next=21,this._sendSubscriptionToServer();case 21:return t.sent.success,this._showLocalNotification("üîî Notifikasi Diaktifkan","Anda akan menerima notifikasi cerita baru."),t.abrupt("return",!0);case 27:return t.prev=27,t.t0=t.catch(5),this._showLocalNotification("‚ùå Gagal","Tidak dapat mengaktifkan notifikasi: "+t.t0.message),t.abrupt("return",!1);case 32:case"end":return t.stop()}}),t,this,[[5,27]])}))),function(){return u.apply(this,arguments)})},{key:"unsubscribe",value:(a=w(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.subscription){t.next=2;break}return t.abrupt("return",!0);case 2:return t.prev=2,t.next=5,this.subscription.unsubscribe();case 5:if(t.sent){t.next=8;break}throw new Error("Unsubscribe failed");case 8:return this.subscription=null,this.isSubscribed=!1,t.next=12,this._removeSubscriptionFromServer();case 12:return t.sent.success,this._showLocalNotification("üîï Notifikasi Dimatikan","Anda tidak akan menerima notifikasi lagi."),t.abrupt("return",!0);case 18:return t.prev=18,t.t0=t.catch(2),this._showLocalNotification("‚ö†Ô∏è Peringatan","Notifikasi dimatikan secara lokal, tetapi mungkin masih aktif di server."),t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,this,[[2,18]])}))),function(){return a.apply(this,arguments)})},{key:"_sendSubscriptionToServer",value:(o=w(f().mark((function t(){var e,n,r,i,o,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.subscription){t.next=2;break}return t.abrupt("return",{success:!1,error:"No subscription"});case 2:if(e=localStorage.getItem("authToken")){t.next=6;break}return t.abrupt("return",{success:!1,error:"No auth token"});case 6:return t.prev=6,n=this.subscription.toJSON(),r={endpoint:n.endpoint,keys:{p256dh:n.keys.p256dh,auth:n.keys.auth}},t.next=12,fetch("https://story-api.dicoding.dev/v1/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(r)});case 12:if((i=t.sent).ok){t.next=25;break}return t.next=16,i.text();case 16:if(o=t.sent,400!==i.status){t.next=22;break}return t.abrupt("return",{success:!1,error:"Bad Request - Mungkin subscription sudah ada atau format salah"});case 22:if(401!==i.status){t.next=24;break}return t.abrupt("return",{success:!1,error:"Unauthorized - Token mungkin expired"});case 24:throw new Error("Server returned ".concat(i.status,": ").concat(o));case 25:return t.next=27,i.json();case 27:return a=t.sent,t.abrupt("return",{success:!0,data:a});case 32:return t.prev=32,t.t0=t.catch(6),t.abrupt("return",{success:!1,error:t.t0.message});case 36:case"end":return t.stop()}}),t,this,[[6,32]])}))),function(){return o.apply(this,arguments)})},{key:"_removeSubscriptionFromServer",value:(i=w(f().mark((function t(){var e,n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.subscription){t.next=2;break}return t.abrupt("return",{success:!1,error:"No subscription"});case 2:if(e=localStorage.getItem("authToken")){t.next=5;break}return t.abrupt("return",{success:!1,error:"No auth token"});case 5:return t.prev=5,n=this.subscription.toJSON(),t.next=9,fetch("https://story-api.dicoding.dev/v1/notifications/subscribe",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({endpoint:n.endpoint})});case 9:if((r=t.sent).ok){t.next=16;break}return t.next=13,r.text();case 13:return t.sent,t.abrupt("return",{success:!1,error:"Server returned ".concat(r.status)});case 16:return t.abrupt("return",{success:!0});case 20:return t.prev=20,t.t0=t.catch(5),t.abrupt("return",{success:!1,error:t.t0.message});case 24:case"end":return t.stop()}}),t,this,[[5,20]])}))),function(){return i.apply(this,arguments)})},{key:"_showLocalNotification",value:function(t,e){if("Notification"in window&&"granted"===Notification.permission)try{new Notification(t,{body:e,icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png"})}catch(n){alert("".concat(t,": ").concat(e))}else alert("".concat(t,": ").concat(e))}},{key:"_urlBase64ToUint8Array",value:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}},{key:"getStatus",value:function(){return{isSubscribed:this.isSubscribed,isSupported:this._isSupported(),permission:Notification.permission,isInitialized:this._isInitialized,subscription:this.subscription?this.subscription.toJSON():null}}},{key:"debugSubscription",value:(r=w(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getStatus(),this.subscription,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],e&&k(t.prototype,e),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,u,c}());function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function P(){var t=I(),e=t.m(P),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var i={throw:1,return:2,break:3,continue:3};function o(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,i[t],e)},delegateYield:function(t,i,o){return e.resultName=i,n(r.d,N(t),o)},finish:function(t){return n(r.f,t)}},n=function(t,n,i){r.p=e.prev,r.n=e.next;try{return t(n,i)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(P=function(){return{wrap:function(e,n,r,i){return t.w(o(e),n,r,i&&i.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new B(t,e)},AsyncIterator:E,async:function(t,e,n,i,a){return(r(e)?j:T)(o(t),e,n,i,a)},keys:O,values:N}})()}function N(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(S(t)+" is not iterable")}function O(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function T(t,e,n,r,i){var o=j(t,e,n,r,i);return o.next().then((function(t){return t.done?t.value:o.next()}))}function j(t,e,n,r,i){return new E(I().w(t,e,n,r),i||Promise)}function E(t,e){function n(r,i,o,a){try{var u=t[r](i),c=u.value;return c instanceof B?e.resolve(c.v).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,a)}))}catch(t){a(t)}}var r;this.next||(L(E.prototype),L(E.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),L(this,"_invoke",(function(t,i,o){function a(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function I(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return L(s,"_invoke",function(n,r,i){var o,u,c,s=0,f=i||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,u=0,c=t,p.n=n,a}};function d(n,r){for(u=n,c=r,e=0;!l&&s&&!i&&e<f.length;e++){var i,o=f[e],d=p.p,h=o[2];n>3?(i=h===r)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=d&&((i=n<2&&d<o[1])?(u=0,p.v=r,p.n=o[1]):d<h&&(i=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,p.n=h,u=0))}if(i||n>1)return a;throw l=!0,r}return function(i,f,h){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,h),u=f,c=h;(e=u<2?t:c)||!l;){o||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,o){if(u||(i="next"),e=o[i]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=o.return)&&e.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){o=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,i,o),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(L(e={},r,(function(){return this})),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,L(t,i,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,L(l,"constructor",s),L(s,"constructor",c),c.displayName="GeneratorFunction",L(s,i,"GeneratorFunction"),L(l),L(l,i,"Generator"),L(l,r,(function(){return this})),L(l,"toString",(function(){return"[object Generator]"})),(I=function(){return{w:o,m:p}})()}function L(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}L=function(t,e,n,r){function o(e,n){L(t,e,(function(t){return this._invoke(e,n,t)}))}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},L(t,e,n,r)}function B(t,e){this.v=t,this.k=e}function A(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function G(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){A(o,r,i,a,u,"next",t)}function u(t){A(o,r,i,a,u,"throw",t)}a(void 0)}))}}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==S(e)?e:e+""}var D=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.navElement=null,this.updateNavigation=this.updateNavigation.bind(this),this._isPushManagerInitialized=!1},e=[{key:"init",value:(i=G(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.navElement=document.getElementById("nav-list"),this.updateNavigation(),window.addEventListener("authchange",this.updateNavigation),c.y.isLoggedIn()&&this._initializePushManager();case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_initializePushManager",value:(r=G(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.init();case 3:this._isPushManagerInitialized=!0,this._updateNotificationUI(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),this._isPushManagerInitialized=!1;case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return r.apply(this,arguments)})},{key:"updateNavigation",value:function(){var t=this;if(this.navElement){var e=c.y.isLoggedIn(),n=c.y.getUserName();if(e){this.navElement.innerHTML='\n        <li><a href="#/beranda" class="nav-link">Beranda</a></li>\n        <li><a href="#/about" class="nav-link">About</a></li>\n        <li><a href="#/add" class="nav-link">Tambah Cerita</a></li>\n        <li><a href="#/favorites" class="nav-link">Favorit</a></li>\n        <li><a href="#/offline" class="nav-link">Offline</a></li>\n        <li class="nav-user">\n          <span class="user-name">Halo, '.concat(n,'</span>\n          <div class="notification-controls">\n            <button id="enable-notifications" class="notification-toggle-btn" style="display: none;">\n              üîî Aktifkan Notifikasi\n            </button>\n            <button id="disable-notifications" class="notification-toggle-btn secondary" style="display: none;">\n              üîï Matikan Notifikasi\n            </button>\n          </div>\n          <button id="logout-btn" class="logout-button" aria-label="Keluar dari akun">Keluar</button>\n        </li>\n      ');var r=document.getElementById("logout-btn");r&&r.addEventListener("click",this.handleLogout.bind(this)),setTimeout((function(){t._setupNotificationControls()}),1e3)}else this.navElement.innerHTML='\n        <li><a href="#/about" class="nav-link">About</a></li>\n        <li><a href="#/login" class="nav-link">Masuk</a></li>\n        <li><a href="#/register" class="nav-link">Daftar</a></li>\n      '}}},{key:"_setupNotificationControls",value:function(){var t=this,e=document.getElementById("enable-notifications"),n=document.getElementById("disable-notifications");e&&n&&(this._updateNotificationUI(),e.addEventListener("click",G(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._isPushManagerInitialized){e.next=6;break}return e.next=5,x.init();case 5:t._isPushManagerInitialized=!0;case 6:return e.next=8,x.subscribe();case 8:e.sent?(t._updateNotificationUI(),t._showNotificationMessage("Notifikasi berhasil diaktifkan","success")):t._showNotificationMessage("Gagal mengaktifkan notifikasi","error");case 10:case"end":return e.stop()}}),e)})))),n.addEventListener("click",G(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._isPushManagerInitialized){e.next=6;break}return e.next=5,x.init();case 5:t._isPushManagerInitialized=!0;case 6:return e.next=8,x.unsubscribe();case 8:e.sent?(t._updateNotificationUI(),t._showNotificationMessage("Notifikasi berhasil dimatikan","success")):t._showNotificationMessage("Gagal mematikan notifikasi","error");case 10:case"end":return e.stop()}}),e)})))))}},{key:"_showNotificationMessage",value:function(t,e){var n=document.createElement("div");n.textContent=t,n.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 12px 20px;\n    background: ".concat("success"===e?"#4CAF50":"#f44336",";\n    color: white;\n    border-radius: 4px;\n    z-index: 10000;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n  "),document.body.appendChild(n),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n)}),3e3)}},{key:"_updateNotificationUI",value:function(){var t=document.getElementById("enable-notifications"),e=document.getElementById("disable-notifications");if(t&&e){var n=x.getStatus();n.isSubscribed?(t.style.display="none",e.style.display="inline-block"):(t.style.display="inline-block",e.style.display="none"),n.isSupported||(t.style.display="none",e.style.display="none")}}},{key:"handleLogout",value:function(){if(confirm("Apakah Anda yakin ingin keluar?")){c.y.logout(),window.dispatchEvent(new Event("authchange")),window.location.hash="#/about";var t=document.getElementById("main-content");t&&(t.innerHTML='\n          <div style="text-align: center; padding: 40px;">\n            <h1>Berhasil Keluar</h1>\n            <p>Anda telah berhasil keluar dari akun.</p>\n            <p>Mengarahkan ke halaman about...</p>\n          </div>\n        ')}}}],e&&M(t.prototype,e),n&&M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i}());function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function R(){var t=J(),e=t.m(R),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var i={throw:1,return:2,break:3,continue:3};function o(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,i[t],e)},delegateYield:function(t,i,o){return e.resultName=i,n(r.d,z(t),o)},finish:function(t){return n(r.f,t)}},n=function(t,n,i){r.p=e.prev,r.n=e.next;try{return t(n,i)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(R=function(){return{wrap:function(e,n,r,i){return t.w(o(e),n,r,i&&i.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new V(t,e)},AsyncIterator:q,async:function(t,e,n,i,a){return(r(e)?H:K)(o(t),e,n,i,a)},keys:U,values:z}})()}function z(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(F(t)+" is not iterable")}function U(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function K(t,e,n,r,i){var o=H(t,e,n,r,i);return o.next().then((function(t){return t.done?t.value:o.next()}))}function H(t,e,n,r,i){return new q(J().w(t,e,n,r),i||Promise)}function q(t,e){function n(r,i,o,a){try{var u=t[r](i),c=u.value;return c instanceof V?e.resolve(c.v).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,a)}))}catch(t){a(t)}}var r;this.next||(W(q.prototype),W(q.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),W(this,"_invoke",(function(t,i,o){function a(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function J(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return W(s,"_invoke",function(n,r,i){var o,u,c,s=0,f=i||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,u=0,c=t,p.n=n,a}};function d(n,r){for(u=n,c=r,e=0;!l&&s&&!i&&e<f.length;e++){var i,o=f[e],d=p.p,h=o[2];n>3?(i=h===r)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=d&&((i=n<2&&d<o[1])?(u=0,p.v=r,p.n=o[1]):d<h&&(i=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,p.n=h,u=0))}if(i||n>1)return a;throw l=!0,r}return function(i,f,h){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,h),u=f,c=h;(e=u<2?t:c)||!l;){o||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,o){if(u||(i="next"),e=o[i]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=o.return)&&e.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){o=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,i,o),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(W(e={},r,(function(){return this})),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,W(t,i,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,W(l,"constructor",s),W(s,"constructor",c),c.displayName="GeneratorFunction",W(s,i,"GeneratorFunction"),W(l),W(l,i,"Generator"),W(l,r,(function(){return this})),W(l,"toString",(function(){return"[object Generator]"})),(J=function(){return{w:o,m:p}})()}function W(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}W=function(t,e,n,r){function o(e,n){W(t,e,(function(t){return this._invoke(e,n,t)}))}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},W(t,e,n,r)}function V(t,e){this.v=t,this.k=e}function Y(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function Q(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Y(o,r,i,a,u,"next",t)}function u(t){Y(o,r,i,a,u,"throw",t)}a(void 0)}))}}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$(r.key),r)}}function Z(t,e,n){return(e=$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $(t){var e=function(t,e){if("object"!=F(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==F(e)?e:e+""}var tt={"/beranda":function(){return i.e(816).then(i.bind(i,816))},"/about":function(){return i.e(976).then(i.bind(i,976))},"/add":function(){return i.e(504).then(i.bind(i,504))},"/login":function(){return i.e(701).then(i.bind(i,701))},"/register":function(){return i.e(575).then(i.bind(i,575))},"/favorites":function(){return i.e(636).then(i.bind(i,636))},"/offline":function(){return i.e(136).then(i.bind(i,136))}};function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(){var t=ct(),e=t.m(nt),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var i={throw:1,return:2,break:3,continue:3};function o(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,i[t],e)},delegateYield:function(t,i,o){return e.resultName=i,n(r.d,rt(t),o)},finish:function(t){return n(r.f,t)}},n=function(t,n,i){r.p=e.prev,r.n=e.next;try{return t(n,i)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(nt=function(){return{wrap:function(e,n,r,i){return t.w(o(e),n,r,i&&i.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new ft(t,e)},AsyncIterator:ut,async:function(t,e,n,i,a){return(r(e)?at:ot)(o(t),e,n,i,a)},keys:it,values:rt}})()}function rt(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(et(t)+" is not iterable")}function it(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ot(t,e,n,r,i){var o=at(t,e,n,r,i);return o.next().then((function(t){return t.done?t.value:o.next()}))}function at(t,e,n,r,i){return new ut(ct().w(t,e,n,r),i||Promise)}function ut(t,e){function n(r,i,o,a){try{var u=t[r](i),c=u.value;return c instanceof ft?e.resolve(c.v).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(c).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,a)}))}catch(t){a(t)}}var r;this.next||(st(ut.prototype),st(ut.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),st(this,"_invoke",(function(t,i,o){function a(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(a,a):a()}),!0)}function ct(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return st(s,"_invoke",function(n,r,i){var o,u,c,s=0,f=i||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,u=0,c=t,p.n=n,a}};function d(n,r){for(u=n,c=r,e=0;!l&&s&&!i&&e<f.length;e++){var i,o=f[e],d=p.p,h=o[2];n>3?(i=h===r)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=d&&((i=n<2&&d<o[1])?(u=0,p.v=r,p.n=o[1]):d<h&&(i=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,p.n=h,u=0))}if(i||n>1)return a;throw l=!0,r}return function(i,f,h){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,h),u=f,c=h;(e=u<2?t:c)||!l;){o||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,o){if(u||(i="next"),e=o[i]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=o.return)&&e.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=t}else if((e=(l=p.n<0)?c:n.call(r,p))!==a)break}catch(e){o=t,u=1,c=e}finally{s=1}}return{value:e,done:l}}}(n,i,o),!0),s}var a={};function u(){}function c(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(st(e={},r,(function(){return this})),e),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,st(t,i,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,st(l,"constructor",s),st(s,"constructor",c),c.displayName="GeneratorFunction",st(s,i,"GeneratorFunction"),st(l),st(l,i,"Generator"),st(l,r,(function(){return this})),st(l,"toString",(function(){return"[object Generator]"})),(ct=function(){return{w:o,m:p}})()}function st(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}st=function(t,e,n,r){function o(e,n){st(t,e,(function(t){return this._invoke(e,n,t)}))}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},st(t,e,n,r)}function ft(t,e){this.v=t,this.k=e}function lt(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,i)}function pt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){lt(o,r,i,a,u,"next",t)}function u(t){lt(o,r,i,a,u,"throw",t)}a(void 0)}))}}var dt,ht=new(function(){return t=function t(e){var n=e.navigationDrawer,r=e.drawerButton,i=e.content;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,"_content",null),Z(this,"_drawerButton",null),Z(this,"_navigationDrawer",null),Z(this,"_isRendering",!1),Z(this,"_currentPage",null),Z(this,"_previousRoute",null),Z(this,"_currentRoute",null),Z(this,"_pageOrder",{"/beranda":1,"/about":2,"/add":3,"/favorites":4,"/offline":5,"/login":6,"/register":7}),this._content=i,this._drawerButton=r,this._navigationDrawer=n,this._isRendering=!1,this._currentPage=null,this._previousRoute=null,this._currentRoute=null,this._setupDrawer(),this._setupSkipLink(),this._initRouter(),this._initNavigation()},e=[{key:"_initNavigation",value:function(){D.init()}},{key:"_initRouter",value:function(){var t,e,n,r=this,i=(t=function(){return r.renderPage()},e=100,function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout((function(){clearTimeout(n),t.apply(void 0,i)}),e)});window.addEventListener("hashchange",i),window.addEventListener("load",(function(){return r.renderPage()})),window.addEventListener("authchange",(function(){r.renderPage(),D.init()}))}},{key:"_setupDrawer",value:function(){var t=this;this._drawerButton&&this._navigationDrawer&&(this._drawerButton.addEventListener("click",(function(){var e=t._navigationDrawer.classList.toggle("open");t._drawerButton.setAttribute("aria-expanded",e),e?(t._drawerButton.innerHTML="‚úï",t._drawerButton.setAttribute("aria-label","Tutup menu navigasi")):(t._drawerButton.innerHTML="‚ò∞",t._drawerButton.setAttribute("aria-label","Buka menu navigasi"))})),document.body.addEventListener("click",(function(e){t._navigationDrawer.contains(e.target)||t._drawerButton.contains(e.target)||!t._navigationDrawer.classList.contains("open")||(t._navigationDrawer.classList.remove("open"),t._drawerButton.setAttribute("aria-expanded","false"),t._drawerButton.innerHTML="‚ò∞",t._drawerButton.setAttribute("aria-label","Buka menu navigasi"))})),this._navigationDrawer.querySelectorAll("a").forEach((function(e){e.addEventListener("click",(function(){window.innerWidth<768&&(t._navigationDrawer.classList.remove("open"),t._drawerButton.setAttribute("aria-expanded","false"),t._drawerButton.innerHTML="‚ò∞",t._drawerButton.setAttribute("aria-label","Buka menu navigasi"))}))})))}},{key:"_setupSkipLink",value:function(){var t=document.querySelector(".skip-link"),e=document.querySelector("#main-content");t&&e&&t.addEventListener("click",(function(t){t.preventDefault(),e.focus(),e.scrollIntoView({behavior:"smooth"}),e.style.outline="2px dashed lightskyblue",e.style.outlineOffset="2px",setTimeout((function(){e.style.outline="none"}),3e3)}))}},{key:"renderPage",value:(i=Q(R().mark((function t(){var e,n,r,i,s=this;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._content){t.next=3;break}return t.abrupt("return");case 3:if(!this._isRendering){t.next=6;break}return t.abrupt("return");case 6:if(this._isRendering=!0,t.prev=7,(e=a(o(u())))&&"#"!==e&&"/"!==e){t.next=14;break}return e=c.y.isLoggedIn()?"#/beranda":"#/about",window.location.hash=e,this._isRendering=!1,t.abrupt("return");case 14:if(c.y.isLoggedIn()){t.next=22;break}if(!["/beranda","/add","/favorites","/offline"].includes(e)){t.next=22;break}return e="#/about",window.location.hash=e,this._isRendering=!1,t.abrupt("return");case 22:if(!c.y.isLoggedIn()){t.next=30;break}if(!["/login","/register"].includes(e)){t.next=30;break}return e="#/beranda",window.location.hash=e,this._isRendering=!1,t.abrupt("return");case 30:if(n=tt[e]){t.next=35;break}return this._showErrorPage("404 - Halaman Tidak Ditemukan","Halaman yang Anda cari tidak ditemukan."),this._isRendering=!1,t.abrupt("return");case 35:if(r=this._getTransitionDirection(e),!document.startViewTransition){t.next=44;break}return i=document.startViewTransition((function(){return s._performPageRender(n,e,r)})),t.next=42,i.finished;case 42:t.next=47;break;case 44:return t.next=47,this._performPageRender(n,e,r);case 47:this._previousRoute=this._currentRoute,this._currentRoute=e,t.next=55;break;case 51:t.prev=51,t.t0=t.catch(7),this._showErrorPage("Terjadi Kesalahan","Maaf, terjadi kesalahan saat menampilkan halaman.");case 55:return t.prev=55,this._isRendering=!1,t.finish(55);case 58:case"end":return t.stop()}}),t,this,[[7,51,55,58]])}))),function(){return i.apply(this,arguments)})},{key:"_getTransitionDirection",value:function(t){if(!this._currentRoute)return"none";var e=this._pageOrder[this._currentRoute]||0,n=this._pageOrder[t]||0;return n>e?"forward":n<e?"backward":"none"}},{key:"_performPageRender",value:(r=Q(R().mark((function t(e,n,r){var i,o;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this._currentPage||"function"!=typeof this._currentPage.cleanup){t.next=4;break}return t.next=4,this._currentPage.cleanup();case 4:return this._applyDirectionalTransition(r),this._content.style.opacity="0",this._content.style.transition="opacity 0.3s ease",t.next=9,new Promise((function(t){return setTimeout(t,50)}));case 9:return t.next=11,e();case 11:return i=t.sent,o=i.default,t.next=15,o.render();case 15:if(this._content.innerHTML=t.sent,this._currentPage=o,"function"!=typeof o.afterRender){t.next=26;break}return t.prev=18,t.next=21,o.afterRender();case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(18);case 26:this._content.style.opacity="1",this._updateDocumentTitle(n),window.scrollTo({top:0,behavior:"smooth"}),t.next=35;break;case 31:throw t.prev=31,t.t1=t.catch(0),t.t1;case 35:case"end":return t.stop()}}),t,this,[[0,31],[18,23]])}))),function(t,e,n){return r.apply(this,arguments)})},{key:"_applyDirectionalTransition",value:function(t){this._content.classList.remove("transition-forward","transition-backward","transition-none"),"forward"===t?this._content.classList.add("transition-forward"):"backward"===t?this._content.classList.add("transition-backward"):this._content.classList.add("transition-none"),this._content&&(this._content.style.viewTransitionName="page-".concat(t))}},{key:"_showErrorPage",value:function(t,e){this._content.innerHTML='\n      <section class="error-page" style="text-align: center; padding: 60px 20px;">\n        <h1>'.concat(t,'</h1>\n        <p style="margin: 20px 0; color: #666;">').concat(e,'</p>\n        <div style="margin-top: 30px;">\n          <a href="#/beranda" class="primary-button" style="margin-right: 10px;">üè† Ke Beranda</a>\n          <a href="#/about" class="secondary-button">‚ÑπÔ∏è Ke About</a>\n        </div>\n      </section>\n    '),this._content.style.opacity=1}},{key:"_updateDocumentTitle",value:function(t){document.title={"/beranda":"Beranda - Cerita di Sekitarmu","/about":"Tentang - Cerita di Sekitarmu","/add":"Tambah Cerita - Cerita di Sekitarmu","/login":"Masuk - Cerita di Sekitarmu","/register":"Daftar - Cerita di Sekitarmu","/favorites":"Favorit - Cerita di Sekitarmu","/offline":"Offline - Cerita di Sekitarmu"}[t]||"Cerita di Sekitarmu"}},{key:"refresh",value:function(){this.renderPage()}},{key:"isUserLoggedIn",value:function(){return c.y.isLoggedIn()}},{key:"getUserInfo",value:function(){return c.y.getUser()}}],e&&X(t.prototype,e),n&&X(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i}())({drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer"),content:document.querySelector("#main-content")});window.addEventListener("hashchange",(function(){return ht.renderPage()})),window.addEventListener("load",pt(nt().mark((function t(){return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht.renderPage();case 2:return t.prev=3,t.next=6,new Promise((function(t){if("serviceWorker"in navigator){var e=window.location.pathname.includes("/po1")?"/po1/sw.js":"/sw.js";fetch(e).then((function(t){if(!t.ok)throw new Error("SW file not found (".concat(t.status,")"));return navigator.serviceWorker.register(e)})).then((function(e){t(e)})).catch((function(e){navigator.serviceWorker.getRegistrations().then((function(t){t.forEach((function(t){t.unregister()}))})),t(null)}))}else t(null)}));case 6:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3);case 12:case"end":return t.stop()}}),t,null,[[3,9]])}))));var vt=document.getElementById("install-button");window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),dt=t,vt&&(vt.style.display="block",vt.addEventListener("click",pt(nt().mark((function t(){var e;return nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!dt){t.next=9;break}return dt.prompt(),t.next=4,dt.userChoice;case 4:e=t.sent,e.outcome,dt=null,vt.style.display="none";case 9:case"end":return t.stop()}}),t)})))))}))})();